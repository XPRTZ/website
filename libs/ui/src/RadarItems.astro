---
import { type RadarItem } from "@xprtz/cms";

interface PageData {
  data: RadarItem[];
  start: number;
  end: number;
  size: number;
  total: number;
  currentPage: number;
  lastPage: number;
  url: Url;
}

interface Url {
  current: string;
  next: string;
  prev: string;
  first: string;
  last: string;
}

const { page } = Astro.props as { page: PageData };

const ringColors = {
  "Adopt": "bg-green-100 text-green-700",
  "Trial": "bg-blue-100 text-blue-700",
  "Assess": "bg-yellow-100 text-yellow-700",
  "Hold": "bg-red-100 text-red-700",
};
---
<div>
  <div class="space-y-8">
    {page.data.map(item => (
      <article class="relative isolate flex flex-col gap-6 border-b border-gray-200 pb-8">
        <div>
          <div class="flex items-center gap-x-4 text-xs mb-3">
            <span class={`inline-flex items-center rounded-xl px-4 py-1 text-sm/6 font-medium ${ringColors[item.ring]}`}>
              {item.ring}
            </span>
            <span class="text-gray-500">{item.quadrant}</span>
          </div>
          <div class="group relative max-w-4xl">
            <h3
              class="text-xl/7 font-semibold text-gray-900 group-hover:text-gray-600"
            >
              <a href={`/technology-radar/${item.slug}`}>
                <span class="absolute inset-0"></span>
                {item.title}
              </a>
            </h3>
            <p class="mt-3 text-base/7 text-gray-600">
              {item.description}
            </p>
          </div>
          {item.tags && item.tags.length > 0 && (
            <div class="mt-4 flex flex-wrap gap-2">
              {item.tags.map((tag) => (
                <span class="inline-flex items-center rounded-md bg-gray-100 px-3 py-1 text-xs font-medium text-gray-700">
                  #{tag.title}
                </span>
              ))}
            </div>
          )}
        </div>
      </article>
    ))}
  </div>
  <nav
    class="flex items-center justify-between border-t border-gray-200 py-3 mt-12"
    aria-label="Pagination"
  >
    <div class="hidden sm:block">
      <p class="text-sm text-gray-700">
        <span class="font-medium">{page.start + 1}</span>
        tot
        <span class="font-medium">{page.end + 1}</span>
        van
        <span class="font-medium">{page.total}</span>
        totale resultaten
      </p>
    </div>
    <div class="flex flex-1 justify-between sm:justify-end">
      {page.url.prev &&
      <a
        href={page.url.prev}
        class="text-sm font-semibold leading-6 text-primary-900 px-3"
        ><span aria-hidden="true">&larr;</span> Vorige</a
      >}
      {page.url.next &&
      <a
        href={page.url.next}
        class="text-sm font-semibold leading-6 text-primary-900 px-3"
        >Volgende <span aria-hidden="true">&rarr;</span></a
      >}
    </div>
  </nav>
</div>
